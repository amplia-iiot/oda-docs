(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{251:function(e,t,a){"use strict";a.r(t);var n=a(0),s=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h3",{attrs:{id:"rule-engine"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rule-engine"}},[e._v("#")]),e._v(" Rule Engine")]),e._v(" "),a("p",[e._v("The rule engine executes custom business rules dependent on the device data. The rules may be deployed from our\n"),a("a",{attrs:{href:"https://www.amplia-iiot.com/iot-platform/",target:"_blank",rel:"noopener noreferrer"}},[e._v("OpenGate IOT Platform"),a("OutboundLink")],1),e._v(" and are loaded at runtime.")]),e._v(" "),a("p",[e._v("The rules are based in a "),a("em",[e._v("when -> then")]),e._v(" paradigm:")]),e._v(" "),a("ul",[a("li",[a("strong",[e._v("when")]),e._v(": Predicates defining when the rule should be executed")]),e._v(" "),a("li",[a("strong",[e._v("then")]),e._v(": Actions to execute when the predicates evaluates to true.")])]),e._v(" "),a("p",[e._v("The scope available inside this functions includes the "),a("strong",[e._v("state")]),e._v(" of the device (all the values of the datastreams in\nthe current moment) and the "),a("strong",[e._v("new value")]),e._v(" that has triggered the rules evaluation.")]),e._v(" "),a("p",[e._v("The interface of a rule is defined as:")]),e._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("interface")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Rule")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("boolean")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("when")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("State")]),e._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("DatastreamValue")]),e._v(" newValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("State")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("State")]),e._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("DatastreamValue")]),e._v(" newValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("h4",{attrs:{id:"implementation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#implementation"}},[e._v("#")]),e._v(" Implementation")]),e._v(" "),a("h5",{attrs:{id:"nashorn-rule-engine"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nashorn-rule-engine"}},[e._v("#")]),e._v(" "),a("router-link",{attrs:{to:"/layers/ruleengine/nashorn.html"}},[e._v("Nashorn Rule Engine")])],1),e._v(" "),a("p",[e._v("The main implementation of the Rule Engine has been developed using "),a("a",{attrs:{href:"https://docs.oracle.com/javase/8/docs/technotes/guides/scripting/nashorn/api.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Nashorn"),a("OutboundLink")],1),e._v("\nengine, allowing to easily define the business rules using "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/JavaScript",target:"_blank",rel:"noopener noreferrer"}},[e._v("JavaScript"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("The rules are written in JavaScript and deployed in the device to be registered.")]),e._v(" "),a("p",[e._v("Every time an event is triggered inside the device with a datastream value update, all the registered rules are triggered to take the necessary actions.")]),e._v(" "),a("p",[a("router-link",{attrs:{to:"/layers/ruleengine/utils.html"}},[e._v("A catalogue of actions")]),e._v(" is provided to ease the rule definitions.")],1),e._v(" "),a("h5",{attrs:{id:"alternative-implementations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#alternative-implementations"}},[e._v("#")]),e._v(" Alternative implementations")]),e._v(" "),a("p",[e._v("New implementations may be added in the future implementing the "),a("a",{attrs:{href:"https://github.com/amplia-iiot/oda/tree/master/oda-ruleengine/api",target:"_blank",rel:"noopener noreferrer"}},[e._v("RuleEngine interface"),a("OutboundLink")],1),e._v(":")]),e._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("interface")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("RuleEngine")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("createRule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("String")]),e._v(" nameRule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("deleteRule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("String")]),e._v(" nameRule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("State")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("engine")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("State")]),e._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("DatastreamValue")]),e._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("stop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);